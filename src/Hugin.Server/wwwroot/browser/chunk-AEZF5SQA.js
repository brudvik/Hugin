import{a as F,b as O,d as I,f as D,h as j,n as A,o as U,q as H}from"./chunk-VCIVRVDU.js";import{a as K}from"./chunk-CG4X7TY4.js";import{$a as u,Ga as b,La as w,Oa as h,Qa as V,Sa as v,Ta as W,Ub as N,V as E,Va as M,Wa as S,Xa as t,Ya as i,Z as T,Za as C,_a as y,a as x,ab as d,eb as r,fb as L,ga as s,gb as k,ha as c,hb as P,jb as g,kb as p,lb as f,nb as B,za as l}from"./chunk-UR2BHKY7.js";var q=(m,_)=>_.id;function J(m,_){m&1&&(C(0,"span",9),r(1," Lagrer... "))}function z(m,_){m&1&&(C(0,"i",10),r(1," Lagre endringer "))}function R(m,_){m&1&&(t(0,"div",7)(1,"div",11)(2,"span",12),r(3,"Laster..."),i()()())}function Q(m,_){if(m&1){let n=y();t(0,"div",57)(1,"div",35)(2,"input",58),u("change",function(){let e=s(n).$implicit,o=d(2);return c(o.toggleCapability(e.id))}),i(),t(3,"label",59),r(4),i(),t(5,"small",60),r(6),i()()()}if(m&2){let n=_.$implicit,a=d(2);l(2),h("id","cap-"+n.id)("checked",a.config.enabledCapabilities==null?null:a.config.enabledCapabilities.includes(n.id)),l(),h("for","cap-"+n.id),l(),k(" ",n.name," "),l(2),L(n.description)}}function G(m,_){if(m&1){let n=y();t(0,"div",8)(1,"div",13)(2,"div",14)(3,"div",15)(4,"h5",16),C(5,"i",17),r(6," Server "),i()(),t(7,"div",18)(8,"div",19)(9,"label",20),r(10,"Servernavn"),i(),t(11,"input",21),f("ngModelChange",function(e){s(n);let o=d();return p(o.config.serverName,e)||(o.config.serverName=e),c(e)}),i(),t(12,"small",22),r(13,"Serverens FQDN"),i()(),t(14,"div",19)(15,"label",20),r(16,"Nettverksnavn"),i(),t(17,"input",23),f("ngModelChange",function(e){s(n);let o=d();return p(o.config.networkName,e)||(o.config.networkName=e),c(e)}),i()(),t(18,"div",24)(19,"div",25)(20,"label",20),r(21,"TLS-port"),i(),t(22,"input",26),f("ngModelChange",function(e){s(n);let o=d();return p(o.config.tlsPort,e)||(o.config.tlsPort=e),c(e)}),i()(),t(23,"div",25)(24,"label",20),r(25,"Admin-port"),i(),t(26,"input",26),f("ngModelChange",function(e){s(n);let o=d();return p(o.config.adminPort,e)||(o.config.adminPort=e),c(e)}),i()()(),t(27,"div",19)(28,"label",20),r(29,"Maks tilkoblinger"),i(),t(30,"input",27),f("ngModelChange",function(e){s(n);let o=d();return p(o.config.maxConnections,e)||(o.config.maxConnections=e),c(e)}),i()()()()(),t(31,"div",13)(32,"div",14)(33,"div",15)(34,"h5",16),C(35,"i",28),r(36," Tilkoblinger "),i()(),t(37,"div",18)(38,"div",19)(39,"label",20),r(40,"Ping-intervall (sekunder)"),i(),t(41,"input",29),f("ngModelChange",function(e){s(n);let o=d();return p(o.config.pingInterval,e)||(o.config.pingInterval=e),c(e)}),i()(),t(42,"div",19)(43,"label",20),r(44,"Ping-timeout (sekunder)"),i(),t(45,"input",30),f("ngModelChange",function(e){s(n);let o=d();return p(o.config.pingTimeout,e)||(o.config.pingTimeout=e),c(e)}),i()(),t(46,"div",19)(47,"label",20),r(48,"Registreringstimeout (sekunder)"),i(),t(49,"input",31),f("ngModelChange",function(e){s(n);let o=d();return p(o.config.registrationTimeout,e)||(o.config.registrationTimeout=e),c(e)}),i()(),t(50,"div",32)(51,"input",33),f("ngModelChange",function(e){s(n);let o=d();return p(o.config.requireTls,e)||(o.config.requireTls=e),c(e)}),i(),t(52,"label",34),r(53," Krev TLS for alle tilkoblinger "),i()(),t(54,"div",35)(55,"input",36),f("ngModelChange",function(e){s(n);let o=d();return p(o.config.cloakHostnames,e)||(o.config.cloakHostnames=e),c(e)}),i(),t(56,"label",37),r(57," Skjul bruker-hostnavn (cloaking) "),i()()()()(),t(58,"div",13)(59,"div",14)(60,"div",15)(61,"h5",16),C(62,"i",38),r(63," Hastighetsbegrensning "),i()(),t(64,"div",18)(65,"div",19)(66,"label",20),r(67,"Meldinger per sekund"),i(),t(68,"input",39),f("ngModelChange",function(e){s(n);let o=d();return p(o.config.messagesPerSecond,e)||(o.config.messagesPerSecond=e),c(e)}),i()(),t(69,"div",19)(70,"label",20),r(71,"Tilkoblingsfors\xF8k per minutt"),i(),t(72,"input",40),f("ngModelChange",function(e){s(n);let o=d();return p(o.config.connectionsPerMinute,e)||(o.config.connectionsPerMinute=e),c(e)}),i()(),t(73,"div",19)(74,"label",20),r(75,"Kommandoer per sekund"),i(),t(76,"input",41),f("ngModelChange",function(e){s(n);let o=d();return p(o.config.commandsPerSecond,e)||(o.config.commandsPerSecond=e),c(e)}),i()(),t(77,"div",35)(78,"input",42),f("ngModelChange",function(e){s(n);let o=d();return p(o.config.enableFloodProtection,e)||(o.config.enableFloodProtection=e),c(e)}),i(),t(79,"label",43),r(80," Aktiver flombeskyttelse "),i()()()()(),t(81,"div",13)(82,"div",14)(83,"div",15)(84,"h5",16),C(85,"i",44),r(86," Kanaler "),i()(),t(87,"div",18)(88,"div",19)(89,"label",20),r(90,"Maks kanaler per bruker"),i(),t(91,"input",45),f("ngModelChange",function(e){s(n);let o=d();return p(o.config.maxChannelsPerUser,e)||(o.config.maxChannelsPerUser=e),c(e)}),i()(),t(92,"div",19)(93,"label",20),r(94,"Maks brukere per kanal"),i(),t(95,"input",46),f("ngModelChange",function(e){s(n);let o=d();return p(o.config.maxUsersPerChannel,e)||(o.config.maxUsersPerChannel=e),c(e)}),i()(),t(96,"div",19)(97,"label",20),r(98,"Maks tema-lengde"),i(),t(99,"input",47),f("ngModelChange",function(e){s(n);let o=d();return p(o.config.maxTopicLength,e)||(o.config.maxTopicLength=e),c(e)}),i()(),t(100,"div",35)(101,"input",48),f("ngModelChange",function(e){s(n);let o=d();return p(o.config.allowChannelCreation,e)||(o.config.allowChannelCreation=e),c(e)}),i(),t(102,"label",49),r(103," Tillat brukere \xE5 opprette kanaler "),i()()()()(),t(104,"div",50)(105,"div",14)(106,"div",51)(107,"h5",16),C(108,"i",52),r(109," Message of the Day (MOTD) "),i(),t(110,"button",53),u("click",function(){s(n);let e=d();return c(e.previewMotd())}),C(111,"i",54),r(112," Forh\xE5ndsvis "),i()(),t(113,"div",18)(114,"textarea",55),f("ngModelChange",function(e){s(n);let o=d();return p(o.config.motd,e)||(o.config.motd=e),c(e)}),i(),t(115,"small",22),r(116," Denne meldingen vises til brukere n\xE5r de kobler til. Bruk vanlige linjeskift. "),i()()()(),t(117,"div",50)(118,"div",14)(119,"div",15)(120,"h5",16),C(121,"i",56),r(122," IRCv3 Capabilities "),i()(),t(123,"div",18)(124,"div",24),M(125,Q,7,5,"div",57,q),i()()()()()}if(m&2){let n=d();l(11),g("ngModel",n.config.serverName),l(6),g("ngModel",n.config.networkName),l(5),g("ngModel",n.config.tlsPort),l(4),g("ngModel",n.config.adminPort),l(4),g("ngModel",n.config.maxConnections),l(11),g("ngModel",n.config.pingInterval),l(4),g("ngModel",n.config.pingTimeout),l(4),g("ngModel",n.config.registrationTimeout),l(2),g("ngModel",n.config.requireTls),l(4),g("ngModel",n.config.cloakHostnames),l(13),g("ngModel",n.config.messagesPerSecond),l(4),g("ngModel",n.config.connectionsPerMinute),l(4),g("ngModel",n.config.commandsPerSecond),l(2),g("ngModel",n.config.enableFloodProtection),l(13),g("ngModel",n.config.maxChannelsPerUser),l(4),g("ngModel",n.config.maxUsersPerChannel),l(4),g("ngModel",n.config.maxTopicLength),l(2),g("ngModel",n.config.allowChannelCreation),l(13),g("ngModel",n.config.motd),l(11),S(n.availableCapabilities)}}function X(m,_){if(m&1&&(t(0,"div",70),r(1),i()),m&2){let n=_.$implicit,a=d(2);l(),P(":",a.config.serverName," 372 bruker :- ",n,"")}}function Y(m,_){if(m&1){let n=y();t(0,"div",61),u("click",function(e){s(n);let o=d();return c(o.closeMotdPreview(e))}),t(1,"div",62)(2,"div",63)(3,"div",64)(4,"h5",65),C(5,"i",66),r(6," MOTD Forh\xE5ndsvisning "),i(),t(7,"button",67),u("click",function(){s(n);let e=d();return c(e.showMotdPreview.set(!1))}),i()(),t(8,"div",68)(9,"div",69)(10,"div",70),r(11),i(),M(12,X,2,2,"div",70,W),t(14,"div",70),r(15),i()()(),t(16,"div",71)(17,"button",72),u("click",function(){s(n);let e=d();return c(e.showMotdPreview.set(!1))}),r(18," Lukk "),i()()()()(),C(19,"div",73)}if(m&2){let n=d();l(11),P(":",n.config.serverName," 375 bruker :- ",n.config.serverName," Message of the Day -"),l(),S(n.motdLines()),l(3),k(":",n.config.serverName," 376 bruker :End of /MOTD command.")}}var re=(()=>{class m{apiService=E(K);loading=b(!1);saving=b(!1);showMotdPreview=b(!1);config=this.getDefaultConfig();originalConfig=this.getDefaultConfig();availableCapabilities=[{id:"message-tags",name:"message-tags",description:"St\xF8tte for meldingstagger"},{id:"server-time",name:"server-time",description:"Servertidsstempel"},{id:"echo-message",name:"echo-message",description:"Ekko av egne meldinger"},{id:"batch",name:"batch",description:"Batching av meldinger"},{id:"labeled-response",name:"labeled-response",description:"Merkede svar"},{id:"multi-prefix",name:"multi-prefix",description:"Flere prefikser i NAMES"},{id:"extended-join",name:"extended-join",description:"Utvidet JOIN-info"},{id:"account-notify",name:"account-notify",description:"Kontovarsler"},{id:"away-notify",name:"away-notify",description:"Borte-varsler"},{id:"chghost",name:"chghost",description:"Vertsendringsvarsler"},{id:"invite-notify",name:"invite-notify",description:"Invitasjonsvarsler"},{id:"userhost-in-names",name:"userhost-in-names",description:"Brukervert i NAMES"},{id:"cap-notify",name:"cap-notify",description:"CAP-endringsvarsler"},{id:"sasl",name:"sasl",description:"SASL-autentisering"},{id:"account-tag",name:"account-tag",description:"Kontotag i meldinger"},{id:"typing",name:"typing",description:"Skriver-indikator"}];ngOnInit(){this.refresh()}getDefaultConfig(){return{serverName:"",networkName:"",tlsPort:6697,adminPort:9443,maxConnections:1e3,pingInterval:120,pingTimeout:60,registrationTimeout:60,requireTls:!0,cloakHostnames:!0,messagesPerSecond:5,connectionsPerMinute:10,commandsPerSecond:10,enableFloodProtection:!0,maxChannelsPerUser:20,maxUsersPerChannel:1e3,maxTopicLength:390,allowChannelCreation:!0,motd:"",enabledCapabilities:[]}}refresh(){this.loading.set(!0),this.apiService.getConfig().subscribe({next:n=>{this.config=x({},n),this.originalConfig=x({},n),this.loading.set(!1)},error:()=>{this.loading.set(!1)}})}hasChanges(){return JSON.stringify(this.config)!==JSON.stringify(this.originalConfig)}toggleCapability(n){this.config.enabledCapabilities||(this.config.enabledCapabilities=[]);let a=this.config.enabledCapabilities.indexOf(n);a===-1?this.config.enabledCapabilities.push(n):this.config.enabledCapabilities.splice(a,1)}saveConfig(){this.saving.set(!0),this.apiService.updateConfig(this.config).subscribe({next:()=>{this.originalConfig=x({},this.config),this.saving.set(!1),alert("Konfigurasjon lagret!")},error:n=>{this.saving.set(!1),alert("Kunne ikke lagre konfigurasjon: "+(n.error?.message||"Ukjent feil"))}})}previewMotd(){this.showMotdPreview.set(!0)}motdLines(){return(this.config.motd||"").split(`
`)}closeMotdPreview(n){n.target.classList.contains("modal")&&this.showMotdPreview.set(!1)}static \u0275fac=function(a){return new(a||m)};static \u0275cmp=T({type:m,selectors:[["app-config"]],standalone:!0,features:[B],decls:16,vars:7,consts:[[1,"config-page"],[1,"page-header","mb-4"],[1,"text-muted","mb-0"],[1,"header-actions"],[1,"btn","btn-outline-secondary","me-2",3,"click","disabled"],[1,"fas","fa-sync-alt"],[1,"btn","btn-primary",3,"click","disabled"],[1,"text-center","py-5"],[1,"row","g-4"],[1,"spinner-border","spinner-border-sm","me-2"],[1,"fas","fa-save","me-2"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"col-lg-6"],[1,"card"],[1,"card-header"],[1,"mb-0"],[1,"fas","fa-server","me-2"],[1,"card-body"],[1,"mb-3"],[1,"form-label"],["type","text","placeholder","irc.example.com",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-text","text-muted"],["type","text","placeholder","MyNetwork",1,"form-control",3,"ngModelChange","ngModel"],[1,"row"],[1,"col-6","mb-3"],["type","number","min","1","max","65535",1,"form-control",3,"ngModelChange","ngModel"],["type","number","min","1",1,"form-control",3,"ngModelChange","ngModel"],[1,"fas","fa-plug","me-2"],["type","number","min","30","max","600",1,"form-control",3,"ngModelChange","ngModel"],["type","number","min","30","max","300",1,"form-control",3,"ngModelChange","ngModel"],["type","number","min","10","max","300",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-check","mb-3"],["type","checkbox","id","requireTls",1,"form-check-input",3,"ngModelChange","ngModel"],["for","requireTls",1,"form-check-label"],[1,"form-check"],["type","checkbox","id","cloakHostnames",1,"form-check-input",3,"ngModelChange","ngModel"],["for","cloakHostnames",1,"form-check-label"],[1,"fas","fa-tachometer-alt","me-2"],["type","number","min","1","max","100","step","0.5",1,"form-control",3,"ngModelChange","ngModel"],["type","number","min","1","max","60",1,"form-control",3,"ngModelChange","ngModel"],["type","number","min","1","max","50",1,"form-control",3,"ngModelChange","ngModel"],["type","checkbox","id","enableFloodProtection",1,"form-check-input",3,"ngModelChange","ngModel"],["for","enableFloodProtection",1,"form-check-label"],[1,"fas","fa-hashtag","me-2"],["type","number","min","1","max","100",1,"form-control",3,"ngModelChange","ngModel"],["type","number","min","1","max","10000",1,"form-control",3,"ngModelChange","ngModel"],["type","number","min","100","max","1000",1,"form-control",3,"ngModelChange","ngModel"],["type","checkbox","id","allowChannelCreation",1,"form-check-input",3,"ngModelChange","ngModel"],["for","allowChannelCreation",1,"form-check-label"],[1,"col-12"],[1,"card-header","d-flex","justify-content-between","align-items-center"],[1,"fas","fa-comment-alt","me-2"],[1,"btn","btn-sm","btn-outline-secondary",3,"click"],[1,"fas","fa-eye","me-1"],["rows","10","placeholder",`Velkommen til Hugin IRC Server!

- F\xF8lg kanalreglene
- V\xE6r hyggelig mot andre brukere`,1,"form-control","font-monospace",3,"ngModelChange","ngModel"],[1,"fas","fa-cogs","me-2"],[1,"col-md-4","col-lg-3","mb-3"],["type","checkbox",1,"form-check-input",3,"change","id","checked"],[1,"form-check-label",3,"for"],[1,"d-block","text-muted"],["tabindex","-1",1,"modal","show","d-block",3,"click"],[1,"modal-dialog","modal-dialog-centered","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"fas","fa-eye","me-2"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"motd-preview"],[1,"motd-line"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"modal-backdrop","show"]],template:function(a,e){a&1&&(t(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),r(4,"Konfigurasjon"),i(),t(5,"p",2),r(6,"Administrer serverinnstillinger"),i()(),t(7,"div",3)(8,"button",4),u("click",function(){return e.refresh()}),C(9,"i",5),i(),t(10,"button",6),u("click",function(){return e.saveConfig()}),w(11,J,2,0)(12,z,2,0),i()()(),w(13,R,4,0,"div",7)(14,G,127,19,"div",8),i(),w(15,Y,20,3)),a&2&&(l(8),h("disabled",e.loading()),l(),V("fa-spin",e.loading()),l(),h("disabled",e.saving()||!e.hasChanges()),l(),v(e.saving()?11:12),l(2),v(e.loading()?13:14),l(2),v(e.showMotdPreview()?15:-1))},dependencies:[N,H,O,j,F,I,U,A,D],styles:[".page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;flex-wrap:wrap;gap:1rem}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;margin-bottom:.25rem}.card-header[_ngcontent-%COMP%]{background:transparent;border-bottom-color:var(--bs-border-color)}.card-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1rem}.font-monospace[_ngcontent-%COMP%]{font-family:JetBrains Mono,Fira Code,Consolas,monospace;font-size:.875rem}.modal[_ngcontent-%COMP%]{background:#00000080}.modal-content[_ngcontent-%COMP%]{background:var(--card-bg);border-color:var(--card-border)}.modal-header[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%]{border-color:var(--bs-border-color)}.motd-preview[_ngcontent-%COMP%]{background:#0d1117;border-radius:.5rem;padding:1rem;font-family:JetBrains Mono,Fira Code,Consolas,monospace;font-size:.8rem;max-height:400px;overflow-y:auto}.motd-line[_ngcontent-%COMP%]{color:#7ee787;white-space:pre-wrap;word-break:break-all}"]})}return m})();export{re as ConfigComponent};
