import{a as y}from"./chunk-4HA4DFTR.js";import{d as w,f as k,k as S}from"./chunk-LA36UFG2.js";import{b as M,c as h,d as O,e as E,g as F,i as L,j as T,p as I,r as N}from"./chunk-VCIVRVDU.js";import{$a as b,Ga as u,La as c,Oa as p,Qa as f,Sa as m,Ub as P,V as s,Xa as n,Ya as t,Z as v,Za as r,ab as _,eb as a,fb as C,nb as x,za as i}from"./chunk-UR2BHKY7.js";function A(o,g){if(o&1&&(n(0,"div",7),r(1,"i",24),n(2,"span"),a(3),t()()),o&2){let d=_();i(3),C(d.error())}}function R(o,g){o&1&&(n(0,"div",14),a(1," Brukernavn er p\xE5krevd "),t())}function B(o,g){o&1&&(n(0,"div",14),a(1," Passord er p\xE5krevd "),t())}function D(o,g){o&1&&(r(0,"span",25),a(1," Logger inn... "))}function G(o,g){o&1&&(r(0,"i",26),a(1," Logg inn "))}var Q=(()=>{class o{fb=s(I);authService=s(y);router=s(k);route=s(w);loginForm;loading=u(!1);error=u(null);showPassword=u(!1);constructor(){this.loginForm=this.fb.group({username:["",[h.required]],password:["",[h.required]]})}isFieldInvalid(d){let l=this.loginForm.get(d);return!!(l&&l.invalid&&l.touched)}togglePassword(){this.showPassword.update(d=>!d)}onSubmit(){if(this.loginForm.invalid){Object.keys(this.loginForm.controls).forEach(e=>{this.loginForm.get(e)?.markAsTouched()});return}this.loading.set(!0),this.error.set(null);let{username:d,password:l}=this.loginForm.value;this.authService.login({username:d,password:l}).subscribe({next:()=>{let e=this.route.snapshot.queryParams.returnUrl||"/dashboard";this.router.navigateByUrl(e)},error:e=>{this.loading.set(!1),e.status===401?this.error.set("Ugyldig brukernavn eller passord"):e.status===429?this.error.set("For mange fors\xF8k. Vennligst vent litt."):this.error.set("Kunne ikke koble til serveren. Pr\xF8v igjen senere.")}})}static \u0275fac=function(l){return new(l||o)};static \u0275cmp=v({type:o,selectors:[["app-login"]],standalone:!0,features:[x],decls:36,vars:15,consts:[[1,"login-container"],[1,"login-card"],[1,"login-header"],[1,"login-logo"],["src","hugin-logo.png","alt","Hugin Logo",2,"width","64px","height","64px"],[1,"text-muted"],[1,"login-form",3,"ngSubmit","formGroup"],["role","alert",1,"alert","alert-danger","d-flex","align-items-center"],[1,"mb-3"],["for","username",1,"form-label"],[1,"input-group"],[1,"input-group-text"],[1,"fas","fa-user"],["type","text","id","username","formControlName","username","placeholder","Skriv inn brukernavn","autocomplete","username",1,"form-control"],[1,"invalid-feedback","d-block"],[1,"mb-4"],["for","password",1,"form-label"],[1,"fas","fa-lock"],["id","password","formControlName","password","placeholder","Skriv inn passord","autocomplete","current-password",1,"form-control",3,"type"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"fas"],["type","submit",1,"btn","btn-primary","w-100","py-2",3,"disabled"],[1,"login-footer"],[1,"fas","fa-shield-alt","me-1"],[1,"fas","fa-exclamation-circle","me-2"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"],[1,"fas","fa-sign-in-alt","me-2"]],template:function(l,e){l&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),r(4,"img",4),t(),n(5,"h1"),a(6,"Hugin Admin"),t(),n(7,"p",5),a(8,"Logg inn for \xE5 administrere IRC-serveren"),t()(),n(9,"form",6),b("ngSubmit",function(){return e.onSubmit()}),c(10,A,4,1,"div",7),n(11,"div",8)(12,"label",9),a(13,"Brukernavn"),t(),n(14,"div",10)(15,"span",11),r(16,"i",12),t(),r(17,"input",13),t(),c(18,R,2,0,"div",14),t(),n(19,"div",15)(20,"label",16),a(21,"Passord"),t(),n(22,"div",10)(23,"span",11),r(24,"i",17),t(),r(25,"input",18),n(26,"button",19),b("click",function(){return e.togglePassword()}),r(27,"i",20),t()(),c(28,B,2,0,"div",14),t(),n(29,"button",21),c(30,D,2,0)(31,G,2,0),t()(),n(32,"div",22)(33,"small",5),r(34,"i",23),a(35," Sikret med TLS og JWT-autentisering "),t()()()()),l&2&&(i(9),p("formGroup",e.loginForm),i(),m(e.error()?10:-1),i(7),f("is-invalid",e.isFieldInvalid("username")),i(),m(e.isFieldInvalid("username")?18:-1),i(7),f("is-invalid",e.isFieldInvalid("password")),p("type",e.showPassword()?"text":"password"),i(2),f("fa-eye",!e.showPassword())("fa-eye-slash",e.showPassword()),i(),m(e.isFieldInvalid("password")?28:-1),i(),p("disabled",e.loading()),i(),m(e.loading()?30:31))},dependencies:[P,N,F,M,O,E,L,T,S],styles:[".login-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:2rem;background:#1e1e1e}.login-card[_ngcontent-%COMP%]{width:100%;max-width:400px;background:#252526;border:1px solid #3c3c3c;border-radius:6px;padding:2rem;box-shadow:0 8px 24px #0006}.login-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem}.login-logo[_ngcontent-%COMP%]{width:72px;height:72px;margin:0 auto 1rem;display:flex;align-items:center;justify-content:center}.login-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:64px;height:64px;object-fit:contain}.login-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:400;margin-bottom:.5rem;color:#e7e7e7}.text-muted[_ngcontent-%COMP%]{color:#858585!important}.login-form[_ngcontent-%COMP%]{margin-bottom:1.5rem}.login-footer[_ngcontent-%COMP%]{text-align:center;padding-top:1rem;border-top:1px solid #3c3c3c}.input-group-text[_ngcontent-%COMP%]{background:#3c3c3c;border-color:#3c3c3c;color:#858585;border-radius:2px}.form-control[_ngcontent-%COMP%]{background:#3c3c3c;border-color:#3c3c3c;color:#ccc;border-radius:2px}.form-control[_ngcontent-%COMP%]:focus{background:#3c3c3c;border-color:#007fd4;color:#e7e7e7;box-shadow:none;outline:1px solid #007fd4;outline-offset:-1px}.form-control[_ngcontent-%COMP%]::placeholder{color:#858585}.btn-primary[_ngcontent-%COMP%]{background-color:#0e639c;border-color:#0e639c;border-radius:2px}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#17b;border-color:#17b}.btn-outline-secondary[_ngcontent-%COMP%]{color:#858585;border-color:#3c3c3c;border-radius:2px}.btn-outline-secondary[_ngcontent-%COMP%]:hover{background-color:#3a3d41;border-color:#3a3d41;color:#ccc}.form-label[_ngcontent-%COMP%]{color:#ccc;font-size:.8125rem;font-weight:400}.alert-danger[_ngcontent-%COMP%]{background-color:#f14c4c1a;border:none;border-left:3px solid #f14c4c;color:#f14c4c;border-radius:0}"]})}return o})();export{Q as LoginComponent};
